---
import LandingPageHero from "../components/LandingPageHero.astro";
import MostUsedLanguage from "../components/MostUsedLanguage.svelte";
import Technologies from "../components/Technologies.astro";
import Layout from "../layouts/Layout.astro";
import { type TrimTopLanguagesResult } from "../utils/utils";
let data: TrimTopLanguagesResult | null = null;

try {
	const response = await fetch(new URL("/api/github-projects", Astro.url).toString());
	data = await response.json();

	console.log(`⚓️ | data:`, data);
} catch (error) {}
---

<Layout title='Mohammed Imran'>
	<main id='main-content' class='scroll-mt-20 mx-auto w-full max-w-6xl px-3 sm:px-6 md:px-6 lg:px-8 grid gap-4 mb-4'>
		<LandingPageHero />

		<div id='technologies' class='space-y-4'>
			<MostUsedLanguage totalLanguageSize={data?.totalLanguageSize || 0} langs={data?.langs || []} />
			<Technologies />
		</div>
	</main>
</Layout>
